/* build : 564493634@qq.com 2015-05-04 14:53:33 */
define(["jquery","baidu.map","jquery.validate"],function(n){function e(){n(function(){var e=n(".submit-form"),a=e.find('input[name="phone"]'),o=e.find('input[name="mail"]'),i=a.add(o);jQuery.validator.addMethod("mobilePhoneEmail",function(){return a.val()||o.val()?!0:!1},"电话和E-mail至少填写一项"),i.on("focus keyup",function(){i.nextAll(".validate-error:not(.validate-success)").remove()});var t=e.validate();e.on("submit",function(){return t.form()?void 0:!1})})}function a(){var e=n("#bmap"),a=e.data(),o=a.mapcode.split(","),i=[106.570025,29.52886],t=parseFloat(o[0])||i[0],r=parseFloat(o[1])||i[1],d=new BMap.Map("bmap"),l=new BMap.Point(t,r);d.centerAndZoom(l,15),d.addControl(new BMap.NavigationControl),d.enableScrollWheelZoom(),d.enableContinuousZoom();var u=new BMap.InfoWindow("<div style='font-size:14px;'>"+a.address+"</div>",{width:250,height:100,title:"联系地址",enableCloseOnClick:!1,enableMessage:!1});d.openInfoWindow(u,l)}function o(){n(function(){var e=n(".submit-form"),a=e.find('input[name="phone"]'),o=e.find('input[name="mail"]'),i=a.add(o);jQuery.validator.addMethod("mobilePhoneEmail",function(){return a.val()||o.val()?!0:!1},"电话和E-mail至少填写一项"),i.on("focus keyup",function(){i.nextAll(".validate-error:not(.validate-success)").remove()});var t=e.validate();e.on("submit",function(){return t.form()?void 0:!1})})}return{index:e,contactUs:a,feedbackList:o,summary:e}});